@import "tailwindcss";

@layer base {
  /* ========================================
     THEME 1: Default (Enterprise Blue)
     ======================================== */
  :root,
  [data-theme="default"] {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 221.2 83.2% 53.3%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 221.2 83.2% 53.3%;
    --radius: 0.5rem;

    /* Status colors */
    --status-running: 142 71% 45%;
    --status-idle: 199 89% 48%;
    --status-error: 0 84% 60%;
  }

  /* ========================================
     THEME 2: Cyberpunk (Neon Glow)
     ======================================== */
  [data-theme="cyberpunk"] {
    /* Background layers */
    --background: 222 47% 5%;        /* #0A0E27 Deep space blue */
    --foreground: 210 40% 98%;       /* #F1F5F9 Light text */

    /* Cards */
    --card: 222 47% 11%;             /* #141827 Elevated dark */
    --card-foreground: 210 40% 98%;

    /* Popover */
    --popover: 222 47% 8%;
    --popover-foreground: 210 40% 98%;

    /* Primary - Neon Cyan */
    --primary: 180 100% 50%;         /* #00FFFF Cyan */
    --primary-foreground: 222 47% 5%;

    /* Secondary - Deep slate */
    --secondary: 215 28% 17%;        /* #1E293B */
    --secondary-foreground: 210 40% 98%;

    /* Muted */
    --muted: 215 28% 17%;
    --muted-foreground: 215 20% 65%; /* #94A3B8 */

    /* Accent - Neon Magenta */
    --accent: 300 100% 50%;          /* #FF00FF Magenta */
    --accent-foreground: 210 40% 98%;

    /* Destructive */
    --destructive: 340 100% 50%;     /* #FF006E Hot pink */
    --destructive-foreground: 210 40% 98%;

    /* Borders */
    --border: 215 28% 22%;           /* #334155 */
    --input: 215 28% 22%;
    --ring: 180 100% 50%;

    --radius: 0.5rem;

    /* Status colors - Neon */
    --status-running: 141 100% 50%;  /* #00FF41 Matrix green */
    --status-idle: 180 100% 50%;     /* #00FFFF Cyan */
    --status-error: 340 100% 50%;    /* #FF006E Magenta */
  }

  /* ========================================
     THEME 3: Glassmorphism (Frosted Glass)
     ======================================== */
  [data-theme="glassmorphism"] {
    /* Background - Gradient */
    --background: 222 47% 8%;        /* Dark base */
    --foreground: 210 40% 98%;

    /* Glass cards - semi-transparent */
    --card: 0 0% 100% / 0.05;        /* White 5% opacity */
    --card-foreground: 210 40% 98%;

    --popover: 0 0% 100% / 0.08;
    --popover-foreground: 210 40% 98%;

    /* Primary - Vibrant blue */
    --primary: 217 91% 60%;          /* #3B82F6 */
    --primary-foreground: 210 40% 98%;

    --secondary: 0 0% 100% / 0.1;
    --secondary-foreground: 210 40% 98%;

    --muted: 0 0% 100% / 0.05;
    --muted-foreground: 215 20% 65%;

    --accent: 267 84% 81%;           /* #C4B5FD Purple */
    --accent-foreground: 222 47% 11%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 210 40% 98%;

    --border: 0 0% 100% / 0.1;
    --input: 0 0% 100% / 0.1;
    --ring: 217 91% 60%;

    --radius: 0.75rem;

    --status-running: 142 71% 45%;
    --status-idle: 199 89% 48%;
    --status-error: 0 84% 60%;
  }

  /* ========================================
     THEME 4: Terminal (Matrix Hacker)
     ======================================== */
  [data-theme="terminal"] {
    /* Pure black background */
    --background: 0 0% 0%;           /* #000000 */
    --foreground: 141 100% 50%;      /* #00FF41 Matrix green */

    --card: 0 0% 5%;                 /* #0D0D0D */
    --card-foreground: 141 100% 50%;

    --popover: 0 0% 3%;
    --popover-foreground: 141 100% 50%;

    /* Primary - Matrix green */
    --primary: 141 100% 50%;         /* #00FF41 */
    --primary-foreground: 0 0% 0%;

    --secondary: 0 0% 10%;           /* #1A1A1A */
    --secondary-foreground: 141 100% 50%;

    --muted: 0 0% 8%;
    --muted-foreground: 141 50% 35%; /* Darker green */

    /* Accent - Cyan */
    --accent: 180 100% 50%;          /* #00FFFF */
    --accent-foreground: 0 0% 0%;

    --destructive: 0 100% 50%;       /* #FF0000 Pure red */
    --destructive-foreground: 210 40% 98%;

    --border: 141 100% 20%;          /* Dark green */
    --input: 141 100% 20%;
    --ring: 141 100% 50%;

    --radius: 0.25rem;

    --status-running: 141 100% 50%;  /* Green */
    --status-idle: 180 100% 50%;     /* Cyan */
    --status-error: 0 100% 50%;      /* Red */
  }

  /* ========================================
     THEME 5: Minimal (Clean & Simple)
     ======================================== */
  [data-theme="minimal"] {
    --background: 0 0% 100%;         /* Pure white #FFFFFF - clean canvas */
    --foreground: 0 0% 9%;           /* #171717 Near-black for less harsh contrast */

    --card: 0 0% 100%;               /* Pure white */
    --card-foreground: 0 0% 9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;

    /* Primary - Pure black for maximum contrast */
    --primary: 0 0% 9%;              /* #171717 Near-black instead of pure black */
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 96%;           /* #F5F5F5 Lighter gray for cleaner feel */
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 98%;               /* #FAFAFA Brighter muted background */
    --muted-foreground: 0 0% 46%;    /* #757575 Lighter gray for better readability */

    --accent: 0 0% 9%;               /* #171717 Near-black for active states */
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 51%;        /* #DC2626 Tailwind red-600 - softer red */
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 90%;              /* #E5E5E5 Lighter border for cleaner separation */
    --input: 0 0% 90%;
    --ring: 0 0% 9%;                 /* Near-black ring */

    --radius: 0.375rem;              /* Slightly rounder for modern minimal */

    --status-running: 142 71% 45%;   /* #22C55E Tailwind green-500 - fresh and modern */
    --status-idle: 0 0% 64%;         /* #A3A3A3 Lighter neutral gray */
    --status-error: 0 72% 51%;       /* #DC2626 Tailwind red-600 - softer red */
  }
}

@theme inline {
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
}

@layer base {
  * {
    @apply border-border;
  }

  html,
  body {
    @apply bg-background text-foreground;
    height: 100%;
  }
}

/* ========================================
   THEME-SPECIFIC EFFECTS
   ======================================== */

/* Cyberpunk: Neon glow effects */
[data-theme="cyberpunk"] {
  .neon-text {
    text-shadow:
      0 0 7px hsl(var(--primary) / 0.8),
      0 0 10px hsl(var(--primary) / 0.6),
      0 0 21px hsl(var(--primary) / 0.4);
  }

  .neon-border {
    box-shadow:
      0 0 5px hsl(var(--primary) / 0.5),
      inset 0 0 5px hsl(var(--primary) / 0.2);
  }

  /* Pulsing animation for status indicators */
  @keyframes neon-pulse {
    0%, 100% {
      opacity: 1;
      filter: drop-shadow(0 0 8px hsl(var(--status-running)));
    }
    50% {
      opacity: 0.8;
      filter: drop-shadow(0 0 12px hsl(var(--status-running)));
    }
  }

  .status-pulse {
    animation: neon-pulse 2s ease-in-out infinite;
  }
}

/* Glassmorphism: Frosted glass blur */
[data-theme="glassmorphism"] {
  .glass-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow:
      0 8px 32px 0 rgba(0, 0, 0, 0.37),
      inset 0 0 20px rgba(255, 255, 255, 0.05);
  }

  .glass-strong {
    backdrop-filter: blur(20px) saturate(200%);
  }
}

/* Terminal: Scanline effect */
[data-theme="terminal"] {
  .terminal-scanline {
    position: relative;
    overflow: hidden;
  }

  .terminal-scanline::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(to bottom,
      transparent,
      hsl(var(--primary) / 0.6),
      transparent
    );
    animation: scan 4s linear infinite;
    pointer-events: none;
    z-index: 50;
  }

  @keyframes scan {
    from { transform: translateY(-100%); }
    to { transform: translateY(3000%); }
  }

  /* CRT flicker */
  @keyframes flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.97; }
  }

  body {
    animation: flicker 0.15s infinite;
  }
}

/* Reduced motion support for all themes */
@media (prefers-reduced-motion: reduce) {
  [data-theme="cyberpunk"] .status-pulse,
  [data-theme="terminal"] .terminal-scanline::before,
  [data-theme="terminal"] body {
    animation: none !important;
  }
}

/* ========================================
   ICON THEMING SYSTEM
   ======================================== */

/* Base icon classes - use these on all icons */
.icon-primary {
  color: hsl(var(--primary));
  transition: color 200ms ease, filter 200ms ease;
}

.icon-secondary {
  color: hsl(var(--muted-foreground));
  transition: color 200ms ease, filter 200ms ease;
}

.icon-foreground {
  color: hsl(var(--foreground));
  transition: color 200ms ease, filter 200ms ease;
}

.icon-destructive {
  color: hsl(var(--destructive));
  transition: color 200ms ease, filter 200ms ease;
}

.icon-success {
  color: hsl(var(--status-running));
  transition: color 200ms ease, filter 200ms ease;
}

/* Default theme - clean enterprise style */
[data-theme="default"] .icon-primary {
  color: hsl(var(--primary));
}

[data-theme="default"] .icon-primary:hover {
  color: hsl(var(--primary) / 0.8);
}

/* Cyberpunk theme - neon glow icons */
[data-theme="cyberpunk"] .icon-primary {
  color: hsl(var(--primary));
  filter: drop-shadow(0 0 4px hsl(var(--primary) / 0.7))
          drop-shadow(0 0 8px hsl(var(--primary) / 0.4));
}

[data-theme="cyberpunk"] .icon-primary:hover {
  filter: drop-shadow(0 0 6px hsl(var(--primary) / 0.9))
          drop-shadow(0 0 12px hsl(var(--primary) / 0.6));
}

[data-theme="cyberpunk"] .icon-secondary {
  color: hsl(var(--muted-foreground));
  filter: drop-shadow(0 0 2px hsl(var(--muted-foreground) / 0.5));
}

[data-theme="cyberpunk"] .icon-destructive {
  color: hsl(var(--destructive));
  filter: drop-shadow(0 0 4px hsl(var(--destructive) / 0.7))
          drop-shadow(0 0 8px hsl(var(--destructive) / 0.4));
}

[data-theme="cyberpunk"] .icon-success {
  color: hsl(var(--status-running));
  filter: drop-shadow(0 0 4px hsl(var(--status-running) / 0.7))
          drop-shadow(0 0 8px hsl(var(--status-running) / 0.4));
}

/* Cyberpunk pulsing icon animation */
[data-theme="cyberpunk"] .icon-pulse {
  animation: icon-neon-pulse 2s ease-in-out infinite;
}

@keyframes icon-neon-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 4px hsl(var(--primary) / 0.7))
            drop-shadow(0 0 8px hsl(var(--primary) / 0.4));
  }
  50% {
    filter: drop-shadow(0 0 6px hsl(var(--primary) / 0.9))
            drop-shadow(0 0 16px hsl(var(--primary) / 0.6));
  }
}

/* Glassmorphism theme - soft semi-transparent icons */
[data-theme="glassmorphism"] .icon-primary {
  color: hsl(var(--primary));
  opacity: 0.95;
}

[data-theme="glassmorphism"] .icon-primary:hover {
  opacity: 1;
  filter: drop-shadow(0 2px 4px hsl(var(--primary) / 0.3));
}

[data-theme="glassmorphism"] .icon-secondary {
  color: hsl(var(--muted-foreground));
  opacity: 0.85;
}

[data-theme="glassmorphism"] .icon-secondary:hover {
  opacity: 1;
}

/* Terminal theme - Matrix green glow */
[data-theme="terminal"] .icon-primary {
  color: #00FF41; /* Matrix green */
  filter: drop-shadow(0 0 3px #00FF41)
          drop-shadow(0 0 6px rgba(0, 255, 65, 0.5));
}

[data-theme="terminal"] .icon-primary:hover {
  filter: drop-shadow(0 0 5px #00FF41)
          drop-shadow(0 0 10px rgba(0, 255, 65, 0.7));
}

[data-theme="terminal"] .icon-secondary {
  color: rgba(0, 255, 65, 0.6);
  filter: drop-shadow(0 0 2px rgba(0, 255, 65, 0.4));
}

[data-theme="terminal"] .icon-destructive {
  color: #FF0000;
  filter: drop-shadow(0 0 3px #FF0000)
          drop-shadow(0 0 6px rgba(255, 0, 0, 0.5));
}

[data-theme="terminal"] .icon-success {
  color: #00FF41;
  filter: drop-shadow(0 0 3px #00FF41)
          drop-shadow(0 0 6px rgba(0, 255, 65, 0.5));
}

/* Terminal blinking cursor icon */
[data-theme="terminal"] .icon-blink {
  animation: terminal-blink 1.2s step-end infinite;
}

@keyframes terminal-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Minimal theme - clean black/white with better contrast */
[data-theme="minimal"] .icon-primary {
  color: #000000;
  font-weight: 600; /* Make active icons slightly bolder for visibility */
}

[data-theme="minimal"] .icon-primary:hover {
  color: #000000;
  opacity: 0.8;
}

[data-theme="minimal"] .icon-secondary {
  color: #404040; /* Darker gray (#404040) instead of (#666666) for better visibility */
}

[data-theme="minimal"] .icon-secondary:hover {
  color: #1a1a1a;
}

[data-theme="minimal"] .icon-foreground {
  color: #FFFFFF; /* White for icons on dark backgrounds (selected state) */
}

[data-theme="minimal"] .icon-foreground:hover {
  color: #FFFFFF;
  opacity: 0.9;
}

[data-theme="minimal"] .icon-destructive {
  color: #DC2626; /* Tailwind red-600 - softer red */
}

[data-theme="minimal"] .icon-success {
  color: #22C55E; /* Tailwind green-500 - fresh and vibrant green */
}

/* Icon size utilities */
.icon-sm {
  width: 16px;
  height: 16px;
}

.icon-md {
  width: 20px;
  height: 20px;
}

.icon-lg {
  width: 24px;
  height: 24px;
}

.icon-xl {
  width: 32px;
  height: 32px;
}

/* Mobile-friendly ReactFlow styles */
@layer utilities {
  .touchdevice-flow {
    touch-action: none;
  }

  /* Improve touch targets for ReactFlow controls on mobile */
  @media (max-width: 640px) {
    .react-flow__controls button {
      width: 32px !important;
      height: 32px !important;
    }

    .react-flow__controls button svg {
      max-width: 16px !important;
      max-height: 16px !important;
    }
  }

  /* Ensure ReactFlow pane is scrollable on mobile */
  .react-flow__pane {
    cursor: grab;
  }

  .react-flow__pane:active {
    cursor: grabbing;
  }

  /* Tldraw custom styles for geometry canvas */

  /* Hide tldraw watermark */
  .tl-watermark_SEE-LICENSE {
    display: none !important;
  }

  /* Enable pointer events for GeoGebra shapes inside tldraw */
  .tl-shape .tl-html-container {
    pointer-events: auto !important;
  }

  /* Ensure tldraw canvas fills container */
  .tldraw {
    width: 100% !important;
    height: 100% !important;
  }
}
